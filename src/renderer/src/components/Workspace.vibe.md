# Workspace 组件文档

## 用户需求
### 原始需求
> 提供一个右侧工作区，支持文件内容的对比查看和翻译编辑功能

### 期望效果
- 用户可以查看原文和译文的对比界面
- 用户可以编辑翻译内容并保存
- 用户可以重新翻译单个文件
- 用户可以查看文件的翻译状态信息
- 当未选择文件时显示友好的提示界面

## 实现功能
### 主要功能
- [x] 功能1：空状态显示，当未选择文件时显示提示信息
- [x] 功能2：文件信息栏，显示当前文件路径和翻译状态
- [x] 功能3：重新翻译按钮，对当前文件执行翻译操作
- [x] 功能4：保存按钮，保存用户的手动修改
- [x] 功能5：双栏对比视图，左侧显示原文，右侧显示译文
- [x] 功能6：原文只读显示，以预格式化文本展示源文件内容
- [x] 功能7：译文可编辑区域，支持用户修改翻译内容
- [x] 功能8：响应式布局，适配不同屏幕尺寸
- [x] 功能9：真实文件内容加载，通过API获取原文和译文
- [x] 功能10：文件状态显示，显示文件的翻译状态（未翻译、已过时、已翻译）
- [x] 功能11：加载状态管理，显示加载中、错误和重试功能
- [x] 功能12：保存和翻译操作，支持真实的文件保存和翻译操作
- [x] 功能13：最后修改时间显示，显示文件的最后翻译时间
- [x] 功能14：等宽布局，原文和译文窗口各占50%宽度，确保对比效果

### 技术实现
- 使用 `window.api.translation.getFileComparison()` 获取文件原文和译文
- 使用 `window.api.translation.getFileTree()` 获取文件状态信息
- 使用 `window.api.translation.saveTranslationFile()` 保存翻译内容
- 使用 `window.api.translation.translateSingleFile()` 重新翻译文件
- 实现完整的错误处理和加载状态管理
- 支持实时编辑译文内容

### 状态管理
- `fileData`: 存储文件的原文、译文和状态信息
- `loading`: 控制加载状态显示
- `error`: 错误信息管理
- `saving`: 保存操作状态
- `translating`: 翻译操作状态
- `translatedContent`: 可编辑的译文内容

## 变更历史
### v1.0.0
- **变更类型**: 新增
- **变更原因**: 初始化项目结构，创建基础UI组件
- **变更内容**: 创建工作区组件，包含文件对比查看和翻译编辑功能

### v2.0.0
- **变更类型**: 重构
- **变更原因**: 集成真实的后端API，实现完整的文件管理功能
- **变更内容**: 
  - 移除mock数据，集成真实的后端API调用
  - 实现完整的文件内容加载逻辑
  - 添加文件状态显示（未翻译、已过时、已翻译）
  - 实现真实的保存和翻译操作
  - 添加加载状态、错误处理和重试机制
  - 支持显示文件的最后修改时间
  - 改进用户交互体验，添加操作状态反馈
  - 实现可编辑的译文区域，支持实时编辑
  - 优化错误显示和空状态处理 